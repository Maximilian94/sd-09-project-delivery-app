(this["webpackJsonpdelivery-app-back-end"]=this["webpackJsonpdelivery-app-back-end"]||[]).push([[0],{34:function(t,e,c){},63:function(t,e,c){},64:function(t,e,c){"use strict";c.r(e);var n=c(0),a=c.n(n),s=c(27),o=c.n(s),r=c(9),i=c(2),u=c(4),l=(c(34),c(28)),d=c.n(l).a.create({baseURL:"http://localhost:3001"}),j=c(1);var b=function(){var t=Object(n.useState)(""),e=Object(u.a)(t,2),c=e[0],a=e[1],s=Object(n.useState)(""),o=Object(u.a)(s,2),r=o[0],l=o[1],b=Object(n.useState)(!0),p=Object(u.a)(b,2),O=p[0],m=p[1],h=Object(n.useState)(!1),g=Object(u.a)(h,2),v=g[0],x=g[1],f="common_login__",S=Object(i.g)(),N=function(){r.length>=5&&/(.+)@(.+){2,}\.(.+){2,}/.test(c)?m(!1):m(!0)};return Object(j.jsxs)("div",{className:"login-Page",children:[Object(j.jsx)("input",{className:"email-input",name:"email",value:c,"data-testid":"".concat(f,"input-email"),onChange:function(t){var e=t.target;a(e.value),N()},placeholder:"User Email"}),Object(j.jsx)("input",{className:"password-input",name:"password","data-testid":"".concat(f,"input-password"),value:r,onChange:function(t){var e=t.target;l(e.value),N()},placeholder:"Password"}),Object(j.jsxs)("div",{className:"buttons",children:[Object(j.jsx)("button",{type:"button",className:"signin-button",onClick:function(){d.post("/login",{email:c,password:r}).then((function(t){var e;console.log("LOGOU",t.data.user),e=t.data.user,localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("products",JSON.stringify({})),S.push("/customer/products")})).catch((function(t){console.log(t),x(!0)}))},"data-testid":"".concat(f,"button-login"),disabled:O,children:"LOGIN"}),Object(j.jsx)("button",{type:"button",className:"signup-button","data-testid":"".concat(f,"button-register"),onClick:function(){S.push("/register")},children:"Register"}),v?Object(j.jsxs)("div",{"data-testid":"".concat(f,"element-invalid-email"),children:["LOGIN INVALIDO"," "]}):Object(j.jsx)("div",{})]})]})},p=c(11),O=c.n(p),m=c(13);c(63);var h=function(){var t=Object(n.useState)(""),e=Object(u.a)(t,2),c=e[0],a=e[1],s=Object(n.useState)(""),o=Object(u.a)(s,2),r=o[0],l=o[1],b=Object(n.useState)(""),p=Object(u.a)(b,2),h=p[0],g=p[1],v=Object(n.useState)(!0),x=Object(u.a)(v,2),f=x[0],S=x[1],N=Object(n.useState)(!1),w=Object(u.a)(N,2),y=w[0],I=w[1],k="common_register__",_=Object(i.g)(),C=function(){h.length>=5&&/(.+)@(.+){2,}\.(.+){2,}/.test(c)&&r.length>=12?S(!1):S(!0)},J=function(){var t=Object(m.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:d.post("/register",{email:c,password:h,name:r}).then((function(t){var e;console.log(t.data.user),e=t.data.user,localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("products",JSON.stringify({})),_.push("/customer/products")})).catch((function(t){console.log(t),I(!0)}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"login-Page",children:[Object(j.jsx)("input",{className:"name-input",name:"name",value:r,"data-testid":"".concat(k,"input-name"),onChange:function(t){var e=t.target;l(e.value),C()},placeholder:"Nome completo"}),Object(j.jsx)("input",{className:"email-input",name:"email",value:c,"data-testid":"".concat(k,"input-email"),onChange:function(t){var e=t.target;a(e.value),C()},placeholder:"Email do usu\xe1rio"}),Object(j.jsx)("input",{className:"password-input",name:"password","data-testid":"".concat(k,"input-password"),value:h,onChange:function(t){var e=t.target;g(e.value),C()},placeholder:"Password"}),Object(j.jsxs)("div",{className:"buttons",children:[Object(j.jsx)("button",{type:"button",className:"signin-button",onClick:J,"data-testid":"".concat(k,"button-register"),disabled:f,children:"REGISTER"}),y?Object(j.jsxs)("div",{"data-testid":"".concat(k,"element-invalid_register"),children:["REGISTRO INVALIDO"," "]}):Object(j.jsx)("div",{})]})]})},g=function(){var t="customer_products__element-navbar-",e=JSON.parse(localStorage.getItem("user"));return Object(j.jsx)("nav",{children:Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{"data-testid":"".concat(t,"link-products"),children:Object(j.jsx)(r.b,{to:"/customer/products",children:"Produtos"})}),Object(j.jsx)("li",{"data-testid":"".concat(t,"link-orders"),children:Object(j.jsx)(r.b,{to:"/customer/orders",children:"Meus pedidos"})}),Object(j.jsx)("li",{"data-testid":"".concat(t,"user-full-name"),children:e.name}),Object(j.jsx)("li",{"data-testid":"".concat(t,"link-logout"),children:Object(j.jsx)(r.b,{to:"/login",children:"Sair"})})]})})},v=c(18),x=function(t){var e=t.product,c=e.id,a=e.name,s=e.price,o=e.urlImage,r="customer_products__",i=Object(n.useState)(0),l=Object(u.a)(i,2),d=l[0],b=l[1],p=function(t){var e=t*s,c=JSON.parse(localStorage.getItem("products")),n=Object(v.a)(Object(v.a)({},c),{},{name:e});localStorage.setItem("products",JSON.stringify(n))};return Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{"data-testid":"".concat(r,"element-card-title-").concat(c),children:a}),Object(j.jsx)("p",{"data-testid":"".concat(r,"element-card-price-").concat(c),children:s}),Object(j.jsx)("img",{width:"100px",src:o,alt:a,"data-testid":"".concat(r,"img-card-bg-image-").concat(c)}),Object(j.jsx)("input",{type:"numer",value:d,onChange:function(t){return b(t.target.value)},"data-testid":"".concat(r,"input-card-quantity-").concat(c)}),Object(j.jsx)("button",{type:"button",onClick:function(){b(d+1),p(d+1)},"data-testid":"".concat(r,"button-card-add-item-").concat(c),children:"+"}),Object(j.jsx)("button",{type:"button",onClick:function(){0===d?(b(0),p(0)):(b(d-1),p(d-1))},"data-testid":"".concat(r,"button-card-rm-item-").concat(c),children:"-"})]})},f=function(){return Object(j.jsx)("div",{children:Object(j.jsx)("p",{children:"Carregando..."})})},S=function(){var t=Object(n.useState)([]),e=Object(u.a)(t,2),c=e[0],a=e[1],s=function(){var t=Object(m.a)(O.a.mark((function t(){var e,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("http://localhost:3001/products");case 3:return e=t.sent,t.next=6,e.json();case 6:c=t.sent,console.log(c),a(c),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){s()}),[]),Object(j.jsxs)("div",{children:[Object(j.jsx)(g,{}),c?c.map((function(t){return Object(j.jsx)(x,{product:t},t.id)})):Object(j.jsx)(f,{})]})};var N=function(){return Object(j.jsx)(r.a,{children:Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{path:"/login",component:b}),Object(j.jsx)(i.b,{path:"/register",component:h}),Object(j.jsx)(i.b,{path:"/customer/products",component:S}),Object(j.jsx)(i.a,{from:"/",to:"/login"})]})})},w=function(){return Object(j.jsx)(N,{})};o.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(w,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.ffad2a18.chunk.js.map